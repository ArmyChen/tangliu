(function(window){function Request(request_name){this.request_name=request_name}
Request.prototype.combineStr=function(str_arr,connector){if(typeof(str_arr)==="number"){return str_arr}
if(typeof(str_arr)==="string"){str_arr=str_arr.replace(new RegExp('"',"g"),"&quot;");str_arr=str_arr.replace(new RegExp("^\\s*","g"),"");str_arr=str_arr.replace(new RegExp("\\s*$","g"),"");return encodeURIComponent(str_arr)}
var arr=new Array();for(var i=0;i<str_arr.length;++i){if(typeof(str_arr[i])==="string"){str_arr[i]=str_arr[i].replace(new RegExp('"',"g"),"&quot;");str_arr[i]=str_arr[i].replace(new RegExp("^\\s*","g"),"");str_arr[i]=str_arr[i].replace(new RegExp("\\s*$","g"),"")}
arr.push(encodeURIComponent(str_arr[i]))}
if(connector===undefined||connector===null){connector="|"}
return arr.join(connector)};Request.prototype.getQueryString=function(assign_symbol,and_symbol){if(assign_symbol===undefined||assign_symbol===null){assign_symbol="="}
if(and_symbol===undefined||and_symbol===null){and_symbol="&"}
var keyvalue_array=new Array();for(var key in this){if(typeof this[key]!="function"&&key!="request_name"){keyvalue_array.push((new Array(key,assign_symbol,encodeURIComponent(this[key].toString()))).join(""))}}
return keyvalue_array.join(and_symbol)};Request.prototype.getRequestName=function(){return this.request_name};function Input(request_name){Request.call(this,request_name)}
Input.prototype=new Request("Input");function getRootDomain(str){str=str.replace(/\/$/ig,"");str=str.replace(/^(http|ftp|https|ssh):\/\//ig,"");str=str.replace(/(.com|.info|.net|.org|.me|.mobi|.us|.biz|.xxx|.ca|.mx|.tv|.ws|.com.ag|.net.ag|.org.ag|.ag|.am|.asia|.at|.be|.com.br|.net.br|.com.bz|.net.bz|.bz|.cc|.com.co|.net.co|.com.co|.co|.de|.com.es|.nom.es|.org.es|.es|.eu|.fm|.fr|.gs|.co.in|.firm.in|.gen.in|.ind.in|.net.in|.org.in|.in|.it|.jobs|.jp|.ms|.com.mx|.nl|.nu|.co.nz|.net.nz|.org.nz|.se|.tc|.tk|.com.tw|.idv.tw|.org.tw|.tw|.co.uk|.me.uk|.org.uk|.vg|.com.cn|.gov|.gov.cn|.cn)$/ig,"%divide%$1");var tail=str.split("%divide%")[1];if(typeof(tail)==="undefined"){tail=""}
str=str.split("%divide%")[0];var strarr=str.split(".");return"."+strarr[strarr.length-1]+tail}
function getDomain(){var _url=window.location.href;_url=_url.replace(/^(http|ftp|https|ssh):\/\//ig,"");_url=_url.split("/")[0];_url=_url.replace(/\:\d+$/ig,"");return _url}
function setCookie(name,value,expires){var Days=1;var exp=new Date();if(expires===null||expires===undefined){expires=Days*24*60*60*1000}
exp.setTime(exp.getTime()+expires);document.cookie=name+"="+escape(value)+";expires="+exp.toGMTString()+";path=/;domain="+getRootDomain(getDomain())+";"}
function getCookie(name){var arr=document.cookie.match(new RegExp("(^| )"+name+"=([^;]*)(;|$)"));if(arr!=null){return unescape(arr[2])}
return null}
function delCookie(name){var exp=new Date();exp.setTime(exp.getTime()-1);var cval=getCookie(name);if(cval!=null){document.cookie=name+"="+cval+";expires="+exp.toGMTString()}}
if(getCookie("bfd_tag_id")==null){setCookie("bfd_tag_id","0")}else{setCookie("bfd_tag_id",new String(parseInt(getCookie("bfd_tag_id"))+1))}
var timestamp=(new Date()).getTime();if(!getCookie("bfd_sessionid_id")){setCookie("bfd_sessionid_id",timestamp+""+parseInt(Math.random()*10000000000000000),24*60*60*1000)}else{setCookie("bfd_sessionid_id",getCookie("bfd_sessionid_id"),24*60*60*1000)}
Input.getWABIParm=function(){var status=brs.wabi.reqstatus;brs.wabi.reqstatus++;var urlarr=new Array("status=",status);urlarr=urlarr.concat(new Array("&","tag=",getCookie("bfd_tag_id")+"_"+timestamp));urlarr=urlarr.concat(new Array("&",brs.wabi.paramterSet()));return urlarr.join("")};Input.ifInstance=function(req_Instance){if(!(req_Instance instanceof Request)){return false}
if(req_Instance instanceof Input){return true}else{if(req_Instance instanceof PackedRequest){for(var key in req_Instance){if(req_Instance[key]instanceof Input){return true}}}}
return false};function AddItem(item_id,item_name,item_link){Input.call(this,"addItem");this.item_id=item_id;this.item_name=item_name;this.item_link=item_link}
AddItem.prototype=new Input();AddItem.prototype.getQueryString=function(assign_symbol,and_symbol){if(assign_symbol===undefined||assign_symbol===null){assign_symbol="="}
if(and_symbol===undefined||and_symbol===null){and_symbol="&"}
var keyvalue_array=new Array();for(var key in this){if(typeof this[key]!="function"&&key!="request_name"){if(key==="description"){if(typeof(this[key])==="string"){this[key]=this.combineStr(this[key].toString().substr(0,170))}else{if(this[key]instanceof Array){var descripArr=new Array();for(var i=0;i<this[key].length;i++){descripArr.push(this.combineStr(this[key][i],":"))}
this[key]=descripArr.join("|")}else{if(typeof(this[key])==="object"){var _arr=new Array();for(var _key in this[key]){if(typeof this[key]!="function"&&key!="request_name"){_arr.push(this.combineStr(new Array(_key,this[key][_key]),":"))}}
this[key]=_arr.join("|")}}}}else{this[key]=this.combineStr(this[key])}
keyvalue_array.push((new Array(key,assign_symbol,this[key])).join(""))}}
return keyvalue_array.join(and_symbol)};function RemoveItem(item_id){Input.call(this,"removeItem");this.item_id=item_id}
RemoveItem.prototype=new Input();function UserAction(request_name,user_id,item_id,session_id){Input.call(this,request_name);if(user_id!==null&&user_id!==undefined){this.user_id=user_id}
if(item_id!==null&&item_id!==undefined){this.item_id=item_id}
if(session_id===null||session_id===undefined){session_id=getCookie("bfd_sessionid_id")}
this.session_id=session_id}
UserAction.prototype=new Input();UserAction.ifInstance=function(req_Instance){if(!(req_Instance instanceof Request)){return false}
if(req_Instance instanceof UserAction){return true}else{if(req_Instance instanceof PackedRequest){for(var key in req_Instance){if(req_Instance[key]instanceof UserAction){return true}}}}
return false};function WaBiInit(){UserAction.call(this,"WaBiInit")}
WaBiInit.prototype=new UserAction();function VisitItem(user_id,item_id,session_id){UserAction.call(this,"visitItem",user_id,item_id,session_id)}
VisitItem.prototype=new UserAction();function ReviewItem(user_id,item_id,session_id){UserAction.call(this,"reviewItem",user_id,item_id,session_id)}
ReviewItem.prototype=new UserAction();function AddShopCart(user_id,item_id,session_id){UserAction.call(this,"addShopCart",user_id,item_id,session_id)}
AddShopCart.prototype=new UserAction();function AddFavorite(user_id,item_id,session_id){UserAction.call(this,"addFavorite",user_id,item_id,session_id)}
AddFavorite.prototype=new UserAction();function AddWishList(user_id,item_id,session_id){UserAction.call(this,"addWishList",user_id,item_id,session_id)}
AddWishList.prototype=new UserAction();function ClickRecItem(user_id,item_id,session_id,req_id){UserAction.call(this,"clickRecItem",user_id,item_id,session_id);this.req_id=req_id}
ClickRecItem.prototype=new UserAction();function PurchaseItem(user_id,item_id,session_id,price,quantity){UserAction.call(this,"purchaseItem",user_id,item_id,session_id);this.price=price;this.quantity=quantity}
PurchaseItem.prototype=new UserAction();function Recommend(rec_type_code,session_id,number){Request.call(this,"recommend");this.rec_type_code=rec_type_code;if(session_id===null||session_id===undefined){session_id=getCookie("bfd_sessionid_id")}
if(session_id===null||session_id===undefined){session_id=timestamp+""+parseInt(Math.random()*10000000000000000)}
this.session_id=session_id;if(typeof number!="number"){this.number=10}else{this.number=number}}
Recommend.prototype=new Request();Recommend.prototype.getQueryString=function(assign_symbol,and_symbol){if(assign_symbol===undefined||assign_symbol===null){assign_symbol="="}
if(and_symbol===undefined||and_symbol===null){and_symbol="&"}
var keyvalue_array=new Array();for(var key in this){if(typeof this[key]!="function"&&key!="request_name"){if((key==="item_id"||key==="must_show_item_id"||key==="dont_show_item_id")&&this[key].length>0){keyvalue_array.push((new Array(key,assign_symbol,this.combineStr(this[key]))).join(""))}else{if(key==="category"&&this[key].length>0){keyvalue_array.push((new Array("filter",assign_symbol,"Category In ('",this.combineStr(this[key],"',"),"')")).join(""))}else{if(key==="uncategory"&&this[key].length>0){keyvalue_array.push((new Array("filter",assign_symbol,"Category not In ('",this.combineStr(this[key],"',"),"')")).join(""))}else{if(key==="category_name"&&this[key].length>0){keyvalue_array.push((new Array("category",assign_symbol,this.combineStr(this[key],"|"))).join(""))}else{if(this[key]!==null){keyvalue_array.push((new Array(key,assign_symbol,encodeURIComponent(this[key].toString()))).join(""))}}}}}}}
return keyvalue_array.join(and_symbol)};var REC_TYPE_CODE={FREQUENT_BOUGHT_TOGETHER:1,VIEWED_ULTIMATELY_BOUGHT:2,VIEWED_ALSO_VIEW:3,BASED_ON_PURCHASE_HISTORY:4,BASED_ON_SHOPPING_CART:5,BASED_ON_BROWSING_HISTORY:6,BOUGHT_ALSO_BOUGHT:7,PERSONAL_SALES_LIST:8,PERSONAL_VISIT_LIST:9,MERGE_LIST:10,ITEM_RELATED:11,USER_HISTORY:12,ITEM_IMAGE:13,SITE_ACROSS:17};var REC_PAGE_TYPE={HOME:1,ACTIVE:2,LIST:3,GOODS:4,SEARCH:5,CART:6,PURCHASE:7,DONE:8,MEMBER:9,HELP:10,NEWS:11,DEFAULT:12};var PageInfo={};function RecByFreqBoughtTogether(item_id,session_id,number){Recommend.call(this,REC_TYPE_CODE.FREQUENT_BOUGHT_TOGETHER,session_id,number);this.item_id=item_id}
RecByFreqBoughtTogether.prototype=new Recommend();function RecByViewUltiBought(item_id,session_id,number){Recommend.call(this,REC_TYPE_CODE.VIEWED_ULTIMATELY_BOUGHT,session_id,number);this.item_id=item_id}
RecByViewUltiBought.prototype=new Recommend();function RecByViewAlsoView(item_id,session_id,number){Recommend.call(this,REC_TYPE_CODE.VIEWED_ALSO_VIEW,session_id,number);this.item_id=item_id}
RecByViewAlsoView.prototype=new Recommend();function RecByUserHistory(user_id,session_id,number){Recommend.call(this,REC_TYPE_CODE.BASED_ON_PURCHASE_HISTORY,session_id,number);this.user_id=user_id}
RecByUserHistory.prototype=new Recommend();function RecByShoppingCart(item_id,session_id,number){Recommend.call(this,REC_TYPE_CODE.BASED_ON_SHOPPING_CART,session_id,number);this.item_id=item_id}
RecByShoppingCart.prototype=new Recommend();function RecByBrowsingHistory(user_id,session_id,number){Recommend.call(this,REC_TYPE_CODE.BASED_ON_BROWSING_HISTORY,session_id,number);this.user_id=user_id}
RecByBrowsingHistory.prototype=new Recommend();function RecBySiteAcross(user_id,session_id,number){Recommend.call(this,REC_TYPE_CODE.SITE_ACROSS,session_id,number);this.user_id=user_id}
RecBySiteAcross.prototype=new Recommend();function RecByBoughtAlsoBought(item_id,session_id,number){Recommend.call(this,REC_TYPE_CODE.BOUGHT_ALSO_BOUGHT,session_id,number);this.item_id=item_id}
RecByBoughtAlsoBought.prototype=new Recommend();function RecByPersonalSalesList(category,session_id,number){Recommend.call(this,REC_TYPE_CODE.PERSONAL_SALES_LIST,session_id,number);this.category_name=category}
RecByPersonalSalesList.prototype=new Recommend();function RecByItemRelated(item_id,session_id,number){Recommend.call(this,REC_TYPE_CODE.ITEM_RELATED,session_id,number);this.item_id=item_id}
RecByItemRelated.prototype=new Recommend();function PackedRequest(){Request.call(this,"packedRequest")}
PackedRequest.prototype=new Request();PackedRequest.prototype.getQueryString=function(assign_symbol,and_symbol){if(assign_symbol===undefined||assign_symbol===null){assign_symbol="="}
if(and_symbol===undefined||and_symbol===null){and_symbol="&"}
var keyvalue_array=new Array();for(var key in this){if(typeof this[key]!="function"&&key!="request_name"){var req=this[key];keyvalue_array.push((new Array(key,assign_symbol,"action->",req.getRequestName(),"/\\",req.getQueryString("->","/\\"))).join(""))}}
return keyvalue_array.join(and_symbol)};function Client(customer_id,server_url){this.customer_id=customer_id;if(server_url===undefined||server_url===null){var _href=window.location.href;var _protocol="http://";if(_href.indexOf("https://")==0){_protocol="https://"}
this.server=_protocol+"www.baifendian.com/api/"}else{this.server=server_url}}
Client.prototype.getInvokeURL=function(request,callback,customer_id){var cid=customer_id;if(customer_id===null||customer_id===undefined){cid=this.customer_id}
var urlarr=new Array(this.server,request.getRequestName(),".do?customer_id=",cid,"&",request.getQueryString("=","&"),"&callback=",callback);if(UserAction.ifInstance(request)){urlarr=urlarr.concat(new Array("&",Input.getWABIParm()));var b=new f();b.getEt();if(!PageInfo.type){PageInfo.type=b.tag.et}
for(var key in PageInfo){if(typeof(PageInfo[key])==="string"||typeof(PageInfo[key])==="number"){var urlkey=key;switch(urlkey){case"type":urlkey="_t";break;case"signature":urlkey="_s";break;case"parent":urlkey="_p";break;default:break}
urlarr=urlarr.concat(new Array("&"+urlkey+"=",encodeURIComponent(PageInfo[key])))}}}
return urlarr.join("")};Client.prototype.getCategoryInvokeURL=function(request,callback){var urlarr=new Array(this.server,request.getRequestName(),".do?customer_id=",this.customer_id,"_cate","&",request.getQueryString("=","&"),"&callback=",callback);if(UserAction.ifInstance(request)){urlarr=urlarr.concat(new Array("&",Input.getWABIParm()))}
return urlarr.join("")};Client.prototype.getBrandInvokeURL=function(request,callback){var urlarr=new Array(this.server,request.getRequestName(),".do?customer_id=",this.customer_id,"_brand","&",request.getQueryString("=","&"),"&callback=",callback);if(UserAction.ifInstance(request)){urlarr=urlarr.concat(new Array("&",Input.getWABIParm()))}
return urlarr.join("")};Client.prototype.getNewsInvokeURL=function(request,callback){var urlarr=new Array(this.server,request.getRequestName(),".do?customer_id=",this.customer_id,"_news","&",request.getQueryString("=","&"),"&callback=",callback);if(UserAction.ifInstance(request)){urlarr=urlarr.concat(new Array("&",Input.getWABIParm()))}
return urlarr.join("")};Client.prototype.invoke=function(request,callback){return;if(window.brs.global_id!==""){if(request.request_name=="packedRequest"){for(var key in request){if(typeof request[key]!="function"&&key!="request_name"){request[key].fid=window.brs.global_id}}}else{request.fid=window.brs.global_id}}
var callback;try{if(arguments.length>=2){if(typeof(window[arguments[1]])!="function"){alert("回调函数不存在！")}else{callback=arguments[1]}}}catch(e){alert("回调函数不存在！")}
if(!callback){if(!window.bfd_null_function){window.bfd_null_function=function(json){}}
callback="bfd_null_function"}
if(isNewsAPI(request)){invokeBRS(this.getInvokeURL(request,callback,this.customer_id+"_news"))}else{if(isCategoryAPI(request)){invokeBRS(this.getInvokeURL(request,callback,this.customer_id+"_cate"))}else{if(isBrandAPI(request)){invokeBRS(this.getInvokeURL(request,callback,this.customer_id+"_brand"))}else{invokeBRS(this.getInvokeURL(request,callback))}}}};function invokeBRS(url){if(url.indexOf("?")===-1){url+="?random="+(new Date()).getTime()}else{url+="&random="+(new Date()).getTime()}
var script=document.createElement("script");script.setAttribute("src",url);script.setAttribute("charset","utf-8");document.getElementsByTagName("head")[0].appendChild(script)}
function RecItem(item_json){if(typeof item_json=="string"){this.itemId=item_json}else{if(Object.prototype.toString.apply(item_json)==="[object Array]"){if(item_json.length==2){this.itemId=item_json[0];this.salesnum=item_json[1]}else{this.itemId=item_json[0];this.itemName=item_json[1];this.itemLink=item_json[2];this.imageLink=item_json[3];this.itemPrice=item_json[4];this.weight=item_json[5]}}else{this.itemId=item_json.itemId;this.itemName=item_json.itemName;this.itemLink=item_json.itemLink;this.imageLink=item_json.imageLink;this.itemPrice=item_json.itemPrice;this.weight=item_json.weight}}}
function Response(req_json){if(Object.prototype.toString.apply(req_json)==="[object Array]"){this.code=req_json[0];if(this.code==0&&req_json.length>1){this.reqId=req_json[1];this.recs=new Array();for(var i=0;i<req_json[2].length;++i){this.recs.push(new RecItem(req_json[2][i]))}}}else{this.code=parseInt(req_json.code);this.reqId=req_json.reqId;this.recs=req_json.recs}}
var brs=new Object;brs.Client=Client;brs.AddItem=AddItem;brs.RemoveItem=RemoveItem;brs.VisitItem=VisitItem;brs.ReviewItem=ReviewItem;brs.AddShopCart=AddShopCart;brs.AddFavorite=AddFavorite;brs.AddWishList=AddWishList;brs.ClickRecItem=ClickRecItem;brs.PurchaseItem=PurchaseItem;brs.RecByFreqBoughtTogether=RecByFreqBoughtTogether;brs.RecByViewUltiBought=RecByViewUltiBought;brs.RecByBoughtAlsoBought=RecByBoughtAlsoBought;brs.RecByBrowsingHistory=RecByBrowsingHistory;brs.RecByShoppingCart=RecByShoppingCart;brs.RecByViewAlsoView=RecByViewAlsoView;brs.RecByUserHistory=RecByUserHistory;brs.RecByPersonalSalesList=RecByPersonalSalesList;brs.RecByItemRelated=RecByItemRelated;brs.PackedRequest=PackedRequest;brs.invokeBRS=invokeBRS;brs.RecItem=RecItem;brs.Response=Response;brs.WaBiInit=WaBiInit;brs.PageInfo=PageInfo;brs.RecBySiteAcross=RecBySiteAcross;brs.REC_PAGE_TYPE=REC_PAGE_TYPE;window.brs=brs;window.brs.global_id="";var isIE=(navigator.appVersion.indexOf("MSIE")!=-1)?true:false;var isWin=(navigator.appVersion.toLowerCase().indexOf("win")!=-1)?true:false;var isOpera=(navigator.userAgent.indexOf("Opera")!=-1)?true:false;function ControlVersion(){var version;var axo;var e;try{axo=new ActiveXObject(unbfdString("83 104 111 99 107 119 97 118 101 70 108 97 115 104 46 83 104 111 99 107 119 97 118 101 70 108 97 115 104")+".7");version=axo.GetVariable("$version")}catch(e){}
if(!version){try{axo=new ActiveXObject(unbfdString("83 104 111 99 107 119 97 118 101 70 108 97 115 104 46 83 104 111 99 107 119 97 118 101 70 108 97 115 104")+".6");version="WIN 6,0,21,0";axo.AllowScriptAccess="always";version=axo.GetVariable("$version")}catch(e){}}
if(!version){try{axo=new ActiveXObject(unbfdString("83 104 111 99 107 119 97 118 101 70 108 97 115 104 46 83 104 111 99 107 119 97 118 101 70 108 97 115 104")+".3");version=axo.GetVariable("$version")}catch(e){}}
if(!version){try{axo=new ActiveXObject(unbfdString("83 104 111 99 107 119 97 118 101 70 108 97 115 104 46 83 104 111 99 107 119 97 118 101 70 108 97 115 104")+".3");version="WIN 3,0,18,0"}catch(e){}}
if(!version){try{axo=new ActiveXObject(unbfdString("83 104 111 99 107 119 97 118 101 70 108 97 115 104 46 83 104 111 99 107 119 97 118 101 70 108 97 115 104")+"");version="WIN 2,0,0,11"}catch(e){version=-1}}
return version}
function GetSwfVer(){var flashVer=-1;if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins[unbfdString("83 104 111 99 107 119 97 118 101 32 70 108 97 115 104")+" 2.0"]||navigator.plugins[unbfdString("83 104 111 99 107 119 97 118 101 32 70 108 97 115 104")+""]){var swVer2=navigator.plugins[unbfdString("83 104 111 99 107 119 97 118 101 32 70 108 97 115 104")+" 2.0"]?" 2.0":"";var flashDescription=navigator.plugins[unbfdString("83 104 111 99 107 119 97 118 101 32 70 108 97 115 104")+""+swVer2].description;var descArray=flashDescription.split(" ");var tempArrayMajor=descArray[2].split(".");var versionMajor=tempArrayMajor[0];var versionMinor=tempArrayMajor[1];var versionRevision=descArray[3];if(versionRevision==""){versionRevision=descArray[4]}
if(versionRevision[0]=="d"){versionRevision=versionRevision.substring(1)}else{if(versionRevision[0]=="r"){versionRevision=versionRevision.substring(1);if(versionRevision.indexOf("d")>0){versionRevision=versionRevision.substring(0,versionRevision.indexOf("d"))}}}
var flashVer=versionMajor+"."+versionMinor+"."+versionRevision}}else{if(navigator.userAgent.toLowerCase().indexOf("webtv/2.6")!=-1){flashVer=4}else{if(navigator.userAgent.toLowerCase().indexOf("webtv/2.5")!=-1){flashVer=3}else{if(navigator.userAgent.toLowerCase().indexOf("webtv")!=-1){flashVer=2}else{if(isIE&&isWin&&!isOpera){flashVer=ControlVersion()}}}}}
return flashVer}
function DetectFlashVer(reqMajorVer,reqMinorVer,reqRevision){versionStr=GetSwfVer();if(versionStr==-1){return false}else{if(versionStr!=0){if(isIE&&isWin&&!isOpera){tempArray=versionStr.split(" ");tempString=tempArray[1];versionArray=tempString.split(",")}else{versionArray=versionStr.split(".")}
var versionMajor=versionArray[0];var versionMinor=versionArray[1];var versionRevision=versionArray[2];if(versionMajor>parseFloat(reqMajorVer)){return true}else{if(versionMajor==parseFloat(reqMajorVer)){if(versionMinor>parseFloat(reqMinorVer)){return true}else{if(versionMinor==parseFloat(reqMinorVer)){if(versionRevision>=parseFloat(reqRevision)){return true}}}}}
return false}}}
function AC_AddExtension(src,ext){if(src.indexOf("?")!=-1){return src.replace(/\?/,ext+"?")}else{return src+ext}}
function AC_Generateobj(objAttrs,params,embedAttrs){var str="";if(isIE&&isWin&&!isOpera){str+="<object ";for(var i in objAttrs){str+=i+'="'+objAttrs[i]+'" '}
str+=">";for(var i in params){str+='<param name="'+i+'" value="'+params[i]+'" /> '}
str+="</object>"}else{str+="<embed ";for(var i in embedAttrs){str+=i+'="'+embedAttrs[i]+'" '}
str+="> </embed>"}
var flashbox=document.createElement("DIV");flashbox.style.zIndex=1;flashbox.style.position="absolute";flashbox.style.overflow="hidden";flashbox.style.height="0px";document.body.insertBefore(flashbox,null);flashbox.innerHTML=str}
function AC_FL_RunContent(){var ret=AC_GetArgs(arguments,unbfdString("46 115 119 102"),"movie","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",unbfdString("97 112 112 108 105 99 97 116 105 111 110 47 120 45 115 104 111 99 107 119 97 118 101 45 102 108 97 115 104"));AC_Generateobj(ret.objAttrs,ret.params,ret.embedAttrs)}
function AC_SW_RunContent(){var ret=AC_GetArgs(arguments,".dcr","src","clsid:166B1BCA-3F9C-11CF-8075-444553540000",null);AC_Generateobj(ret.objAttrs,ret.params,ret.embedAttrs)}
function AC_GetArgs(args,ext,srcParamName,classid,mimeType){var ret=new Object();ret.embedAttrs=new Object();ret.params=new Object();ret.objAttrs=new Object();for(var i=0;i<args.length;i=i+2){var currArg=args[i].toLowerCase();switch(currArg){case"classid":break;case"pluginspage":ret.embedAttrs[args[i]]=args[i+1];break;case"src":case"movie":args[i+1]=AC_AddExtension(args[i+1],ext);ret.embedAttrs.src=args[i+1];ret.params[srcParamName]=args[i+1];break;case"onafterupdate":case"onbeforeupdate":case"onblur":case"oncellchange":case"onclick":case"ondblclick":case"ondrag":case"ondragend":case"ondragenter":case"ondragleave":case"ondragover":case"ondrop":case"onfinish":case"onfocus":case"onhelp":case"onmousedown":case"onmouseup":case"onmouseover":case"onmousemove":case"onmouseout":case"onkeypress":case"onkeydown":case"onkeyup":case"onload":case"onlosecapture":case"onpropertychange":case"onreadystatechange":case"onrowsdelete":case"onrowenter":case"onrowexit":case"onrowsinserted":case"onstart":case"onscroll":case"onbeforeeditfocus":case"onactivate":case"onbeforedeactivate":case"ondeactivate":case"type":case"codebase":case"id":ret.objAttrs[args[i]]=args[i+1];break;case"width":case"height":case"align":case"vspace":case"hspace":case"class":case"title":case"accesskey":case"name":case"tabindex":ret.embedAttrs[args[i]]=ret.objAttrs[args[i]]=args[i+1];break;default:ret.embedAttrs[args[i]]=ret.params[args[i]]=args[i+1]}}
ret.objAttrs.classid=classid;if(mimeType){ret.embedAttrs.type=mimeType}
return ret}
var loadScript=function(url,callback){return;var script=document.createElement("script");script.setAttribute("id","bfd_cache_id");script.setAttribute("src",url);script.setAttribute("charset","utf-8");if(script.readyState){addEvent(script,"readystatechange",function(){if(script.readyState==="loaded"||script.readyState==="complete"){if(callback){callback()}
removeEvent(script,"readystatechange",arguments.callee)}})}else{addEvent(script,"load",function(){if(callback){callback()}
removeEvent(script,"load",arguments.callee)})}
if(document.getElementById("bfd_cache_id")==null){document.getElementsByTagName("head")[0].appendChild(script)}};var isComplete=false;if(typeof(window.bfd_onload)!="function"){window.bfd_onload=function(){}}
if(typeof(BCore)==="undefined"){window.BCore=function(){}}
BCore.prototype.options={gid:""};if(document.getElementById("bfd_cache_id")==null){loadScript("http://ds.api.baifendian.com/2.0/StdID.do?bfdid=1",function(){window.brs.global_id=BCore.prototype.options.gid})}
var initComplete=function(){if(!isComplete){isComplete=true;window.bfd_onload()}};window.brs.initComplete=initComplete;window[unbfdString("102 108 97 115 104 67 111 109 112 108 101 116 101 67 97 108 108 66 97 99 107")]=function(){var cookieFactory=document.bfd_cookie_factory;window.brs.global_id=typeof(cookieFactory)!="undefined"&&typeof(cookieFactory.getCookie)=="function"?cookieFactory.getCookie():"";window.brs.initComplete()};addEvent(window,"load",function(){return;if(!DetectFlashVer(10,0,0)){window.brs.initComplete()}else{setTimeout(function(){window.brs.initComplete()},10000);loadFlash()}});function bfdString(str){var rst="";for(var i=0;i<str.length;i++){rst+=" "+str.charCodeAt(i)}
return rst}
function unbfdString(str){var rst="";var arr=str.split(" ");for(var i=0;i<arr.length;i++){if(arr[i]){rst+=String.fromCharCode(arr[i])}}
return rst}
window.brs.unbfdString=unbfdString;window.brs.bfdString=bfdString;function loadFlash(){var _href=window.location.href;var _protocol="http://";var _swfFileUrl="115 116 97 116 105 99 46 98 97 105 102 101 110 100 105 97 110 46 99 111 109 47 97 112 105 47 106 115 47 98 102 100 45 99 111 111 107 105 101 45 102 97 99 116 111 114 121 45 49 46 48 46 115 119 102";var _swfUrl="115 116 97 116 105 99 46 98 97 105 102 101 110 100 105 97 110 46 99 111 109 47 97 112 105 47 106 115 47 98 102 100 45 99 111 111 107 105 101 45 102 97 99 116 111 114 121 45 49 46 48";if(_href.indexOf("https://")==0){_protocol="https://";_swfFileUrl="115 115 108 45 115 116 97 116 105 99 46 98 97 105 102 101 110 100 105 97 110 46 99 111 109 47 97 112 105 47 106 115 47 98 102 100 45 99 111 111 107 105 101 45 102 97 99 116 111 114 121 45 49 46 48 46 115 119 102";_swfUrl="115 115 108 45 115 116 97 116 105 99 46 98 97 105 102 101 110 100 105 97 110 46 99 111 109 47 97 112 105 47 106 115 47 98 102 100 45 99 111 111 107 105 101 45 102 97 99 116 111 114 121 45 49 46 48"}
AC_FL_RunContent(unbfdString("99 111 100 101 98 97 115 101"),_protocol+unbfdString("100 111 119 110 108 111 97 100 46 109 97 99 114 111 109 101 100 105 97 46 99 111 109 47 112 117 98 47 115 104 111 99 107 119 97 118 101 47 99 97 98 115 47 102 108 97 115 104 47 115 119 102 108 97 115 104 46 99 97 98 35 118 101 114 115 105 111 110 61 49 48 44 48 44 48 44 48"),unbfdString("119 105 100 116 104"),"0",unbfdString("104 101 105 103 104 116"),"0",unbfdString("115 114 99"),_protocol+unbfdString(_swfFileUrl),unbfdString("113 117 97 108 105 116 121"),unbfdString("104 105 103 104"),unbfdString("112 108 117 103 105 110 115 112 97 103 101"),unbfdString("104 116 116 112 58 47 47 119 119 119 46 97 100 111 98 101 46 99 111 109 47 103 111 47 103 101 116 102 108 97 115 104 112 108 97 121 101 114 95 99 110"),unbfdString("97 108 105 103 110"),unbfdString("109 105 100 100 108 101"),unbfdString("112 108 97 121"),unbfdString("116 114 117 101"),unbfdString("108 111 111 112"),unbfdString("116 114 117 101"),unbfdString("115 99 97 108 101"),unbfdString("115 104 111 119 97 108 108"),unbfdString("119 109 111 100 101"),unbfdString("119 105 110 100 111 119"),unbfdString("100 101 118 105 99 101 102 111 110 116"),unbfdString("102 97 108 115 101"),unbfdString("105 100"),unbfdString("98 102 100 95 99 111 111 107 105 101 95 102 97 99 116 111 114 121"),unbfdString("98 103 99 111 108 111 114"),unbfdString("35 102 102 102 102 102 102"),unbfdString("110 97 109 101"),unbfdString("98 102 100 95 99 111 111 107 105 101 95 102 97 99 116 111 114 121"),unbfdString("109 101 110 117"),"true",unbfdString("97 108 108 111 119 70 117 108 108 83 99 114 101 101 110"),unbfdString("102 97 108 115 101"),unbfdString("97 108 108 111 119 83 99 114 105 112 116 65 99 99 101 115 115"),unbfdString("97 108 119 97 121 115"),unbfdString("109 111 118 105 101"),_protocol+unbfdString(_swfUrl)+"?random="+(new Date()).getTime(),unbfdString("115 97 108 105 103 110"),"")}
function addEvent(target,eventName,callbackHander){if(window.attachEvent){target.attachEvent("on"+eventName,callbackHander)}else{target.addEventListener(eventName,callbackHander,false)}}
function removeEvent(element,type,handle){if(element.removeEventListener){element.removeEventListener(type,handle,false)}else{if(element.detachEvent){element.detachEvent("on"+type,function(){handle.call(element)})}else{element["on"+type]=null}}}
function AddNews(news_id,title,url){AddItem.call(this,news_id,title,url)}
AddNews.prototype=new AddItem();function RemoveNews(news_id){RemoveItem.call(this,news_id)}
RemoveNews.prototype=new RemoveItem();function VisitNews(user_id,news_id,session_id){VisitItem.call(this,user_id,news_id,session_id)}
VisitNews.prototype=new VisitItem();function ClickRecNews(user_id,item_id,session_id,req_id){ClickRecItem.call(this,user_id,item_id,session_id,req_id)}
ClickRecNews.prototype=new ClickRecItem();function RecNewsByNews(news_id,session_id,number){RecByViewAlsoView.call(this,news_id,session_id,number)}
RecNewsByNews.prototype=new RecByViewAlsoView();function RecItemByNewsCategory(news_category,session_id,number){RecByPersonalSalesList.call(this,news_category,session_id,number)}
RecItemByNewsCategory.prototype=new RecByPersonalSalesList();function isNewsAPI(request){var r=request;if(request instanceof PackedRequest){for(var key in request){if(typeof request[key]!="function"&&key!="request_name"){r=request[key];break}}}
return r instanceof AddNews||r instanceof RemoveNews||r instanceof VisitNews||r instanceof ClickRecNews||r instanceof RecNewsByNews||r instanceof RecItemByNewsCategory}
function isCategoryAPI(request){var r=request;if(request instanceof PackedRequest){for(var key in request){if(typeof request[key]!="function"&&key!="request_name"){r=request[key];break}}}
return r instanceof AddCategory||r instanceof RemoveCategory||r instanceof VisitCategory||r instanceof PurchaseCategory||r instanceof AddShopCartCategory||r instanceof ClickRecCategory||r instanceof RecCategoryByCategory||r instanceof RecByCategoryHistory||r instanceof RecCategoryByFreqBoughtTogether||r instanceof RecCategoryByViewUltiBought||r instanceof RecCategoryByShoppingCart||r instanceof RecCategoryByUserHistory||r instanceof RecCategoryByPersonalSalesList||r instanceof RecCategoryByPersonalVisitList}
function isBrandAPI(request){var r=request;if(request instanceof PackedRequest){for(var key in request){if(typeof request[key]!="function"&&key!="request_name"){r=request[key];break}}}
return r instanceof AddBrand||r instanceof RemoveBrand||r instanceof VisitBrand||r instanceof PurchaseBrand||r instanceof AddShopCartBrand||r instanceof ClickRecBrand||r instanceof RecBrandByBrand||r instanceof RecByBrandHistory||r instanceof RecBrandByFreqBoughtTogether||r instanceof RecBrandByViewUltiBought||r instanceof RecBrandByShoppingCart||r instanceof RecBrandByUserHistory||r instanceof RecBrandByPersonalSalesList||r instanceof RecBrandByPersonalVisitList}
brs.AddNews=AddNews;brs.RemoveNews=RemoveNews;brs.VisitNews=VisitNews;brs.ClickRecNews=ClickRecNews;brs.RecNewsByNews=RecNewsByNews;brs.RecItemByNewsCategory=RecItemByNewsCategory;function RecByPersonalVisitList(category,session_id,number){Recommend.call(this,REC_TYPE_CODE.PERSONAL_VISIT_LIST,session_id,number);this.category_name=category}
RecByPersonalVisitList.prototype=new Recommend();brs.RecByPersonalVisitList=RecByPersonalVisitList;function AddCategory(category_id,name,url){AddItem.call(this,category_id,name,url)}
AddCategory.prototype=new AddItem();function RemoveCategory(category_id){RemoveItem.call(this,category_id)}
RemoveCategory.prototype=new RemoveItem();function VisitCategory(user_id,category_id,session_id){VisitItem.call(this,user_id,category_id,session_id)}
VisitCategory.prototype=new VisitItem();function ClickRecCategory(user_id,category_id,session_id,req_id){ClickRecItem.call(this,user_id,category_id,session_id,req_id)}
ClickRecCategory.prototype=new ClickRecItem();function AddShopCartCategory(user_id,category_id,session_id){AddShopCart.call(this,user_id,category_id,session_id)}
AddShopCartCategory.prototype=new AddShopCart();function PurchaseCategory(user_id,category_id,session_id,price,quantity){PurchaseItem.call(this,user_id,category_id,session_id,price,quantity)}
PurchaseCategory.prototype=new PurchaseItem();function RecCategoryByCategory(category_id,session_id,number){RecByViewAlsoView.call(this,category_id,session_id,number)}
RecCategoryByCategory.prototype=new RecByViewAlsoView();function RecByCategoryHistory(user_id,session_id,number){RecByBrowsingHistory.call(this,user_id,session_id,number)}
RecByCategoryHistory.prototype=new RecByBrowsingHistory();function RecCategoryByFreqBoughtTogether(category_id,session_id,number){RecByFreqBoughtTogether.call(this,category_id,session_id,number)}
RecCategoryByFreqBoughtTogether.prototype=new RecByFreqBoughtTogether();function RecCategoryByViewUltiBought(category_id,session_id,number){RecByViewUltiBought.call(this,category_id,session_id,number)}
RecCategoryByViewUltiBought.prototype=new RecByViewUltiBought();function RecCategoryByShoppingCart(category_id,session_id,number){RecByShoppingCart.call(this,category_id,session_id,number)}
RecCategoryByShoppingCart.prototype=new RecByShoppingCart();function RecCategoryByUserHistory(user_id,session_id,number){RecByUserHistory.call(this,user_id,session_id,number)}
RecCategoryByUserHistory.prototype=new RecByUserHistory();function RecCategoryByPersonalSalesList(category_id,session_id,number){RecByPersonalSalesList.call(this,category_id,session_id,number)}
RecCategoryByPersonalSalesList.prototype=new RecByPersonalSalesList();function RecCategoryByPersonalVisitList(category_id,session_id,number){RecByPersonalVisitList.call(this,category_id,session_id,number)}
RecCategoryByPersonalVisitList.prototype=new RecByPersonalVisitList();brs.AddCategory=AddCategory;brs.RemoveCategory=RemoveCategory;brs.VisitCategory=VisitCategory;brs.ClickRecCategory=ClickRecCategory;brs.AddShopCartCategory=AddShopCartCategory;brs.PurchaseCategory=PurchaseCategory;brs.RecCategoryByCategory=RecCategoryByCategory;brs.RecByCategoryHistory=RecByCategoryHistory;brs.RecCategoryByFreqBoughtTogether=RecCategoryByFreqBoughtTogether;brs.RecCategoryByViewUltiBought=RecCategoryByViewUltiBought;brs.RecCategoryByShoppingCart=RecCategoryByShoppingCart;brs.RecCategoryByUserHistory=RecCategoryByUserHistory;brs.RecCategoryByPersonalSalesList=RecCategoryByPersonalSalesList;brs.RecCategoryByPersonalVisitList=RecCategoryByPersonalVisitList;function AddBrand(brand_id,name,url){AddItem.call(this,brand_id,name,url)}
AddBrand.prototype=new AddItem();function RemoveBrand(brand_id){RemoveItem.call(this,brand_id)}
RemoveBrand.prototype=new RemoveItem();function VisitBrand(user_id,brand_id,session_id){VisitItem.call(this,user_id,brand_id,session_id)}
VisitBrand.prototype=new VisitItem();function ClickRecBrand(user_id,brand_id,session_id,req_id){ClickRecItem.call(this,user_id,brand_id,session_id,req_id)}
ClickRecBrand.prototype=new ClickRecItem();function AddShopCartBrand(user_id,brand_id,session_id){AddShopCart.call(this,user_id,brand_id,session_id)}
AddShopCartBrand.prototype=new AddShopCart();function PurchaseBrand(user_id,brand_id,session_id,price,quantity){PurchaseItem.call(this,user_id,brand_id,session_id,price,quantity)}
PurchaseBrand.prototype=new PurchaseItem();function RecBrandByBrand(brand_id,session_id,number){RecByViewAlsoView.call(this,brand_id,session_id,number)}
RecBrandByBrand.prototype=new RecByViewAlsoView();function RecByBrandHistory(user_id,session_id,number){RecByBrowsingHistory.call(this,user_id,session_id,number)}
RecByBrandHistory.prototype=new RecByBrowsingHistory();function RecBrandByFreqBoughtTogether(brand_id,session_id,number){RecByFreqBoughtTogether.call(this,brand_id,session_id,number)}
RecBrandByFreqBoughtTogether.prototype=new RecByFreqBoughtTogether();function RecBrandByViewUltiBought(brand_id,session_id,number){RecByViewUltiBought.call(this,brand_id,session_id,number)}
RecBrandByViewUltiBought.prototype=new RecByViewUltiBought();function RecBrandByShoppingCart(brand_id,session_id,number){RecByShoppingCart.call(this,brand_id,session_id,number)}
RecBrandByShoppingCart.prototype=new RecByShoppingCart();function RecBrandByUserHistory(user_id,session_id,number){RecByUserHistory.call(this,user_id,session_id,number)}
RecBrandByUserHistory.prototype=new RecByUserHistory();function RecBrandByPersonalSalesList(brand_id,session_id,number){RecByPersonalSalesList.call(this,brand_id,session_id,number)}
RecBrandByPersonalSalesList.prototype=new RecByPersonalSalesList();function RecBrandByPersonalVisitList(brand_id,session_id,number){RecByPersonalVisitList.call(this,brand_id,session_id,number)}
RecBrandByPersonalVisitList.prototype=new RecByPersonalVisitList();brs.AddBrand=AddBrand;brs.RemoveBrand=RemoveBrand;brs.VisitBrand=VisitBrand;brs.ClickRecBrand=ClickRecBrand;brs.AddShopCartBrand=AddShopCartBrand;brs.PurchaseBrand=PurchaseBrand;brs.RecBrandByBrand=RecBrandByBrand;brs.RecByBrandHistory=RecByBrandHistory;brs.RecBrandByFreqBoughtTogether=RecBrandByFreqBoughtTogether;brs.RecBrandByViewUltiBought=RecBrandByViewUltiBought;brs.RecBrandByShoppingCart=RecBrandByShoppingCart;brs.RecBrandByUserHistory=RecBrandByUserHistory;brs.RecBrandByPersonalSalesList=RecBrandByPersonalSalesList;brs.RecBrandByPersonalVisitList=RecBrandByPersonalVisitList;function getRecScale(reqId){var result=1;var rec_type_code=parseInt("0x"+reqId.substr(0,2)).toString(10);switch(rec_type_code){case rec_type_code==REC_TYPE_CODE.FREQUENT_BOUGHT_TOGETHER:result=0.8;break;case rec_type_code==REC_TYPE_CODE.VIEWED_ULTIMATELY_BOUGHT:result=0.5;break;case rec_type_code==REC_TYPE_CODE.VIEWED_ALSO_VIEW:result=0.5;break;case rec_type_code==REC_TYPE_CODE.BASED_ON_PURCHASE_HISTORY:result=0.8;break;case rec_type_code==REC_TYPE_CODE.BASED_ON_SHOPPING_CART:result=0.6;break;case rec_type_code==REC_TYPE_CODE.BASED_ON_BROWSING_HISTORY:result=0.5;break;case rec_type_code==REC_TYPE_CODE.BOUGHT_ALSO_BOUGHT:result=0.8;break;case rec_type_code==REC_TYPE_CODE.PERSONAL_SALES_LIST:result=0.8;break;case rec_type_code==REC_TYPE_CODE.PERSONAL_VISIT_LIST:result=0.6;break;case rec_type_code==REC_TYPE_CODE.ITEM_RELATED:result=0.8;break;default:break}
return result}
function createMergeListReqId(modelReqId){var rec_type_code=REC_TYPE_CODE.MERGE_LIST.toString(16);if(rec_type_code.length==1){rec_type_code="0"+rec_type_code}
var result=rec_type_code+modelReqId.substr(2,modelReqId.length);return result}
function mergeResponse(jsonResult1,jsonResult2){jsonResult1=new brs.Response(jsonResult1);jsonResult2=new brs.Response(jsonResult2);var reqId="";var code=-1;var result=new Array();if(jsonResult1.code===0){code=0;if(reqId===""){reqId=createMergeListReqId(jsonResult1.reqId)}
for(var i=0;i<jsonResult1.recs.length;i++){if(typeof(jsonResult1.recs[i].weight)=="undefined"){result[i].weight=1}
jsonResult1.recs[i].weight*=getRecScale(jsonResult1.reqId)}
result=result.concat(jsonResult1.recs)}
if(jsonResult2.code===0){code=0;if(reqId===""){reqId=createMergeListReqId(jsonResult2.reqId)}
for(var i=0;i<jsonResult2.recs.length;i++){if(typeof(jsonResult2.recs[i].weight)=="undefined"){result[i].weight=1}
jsonResult2.recs[i].weight*=getRecScale(jsonResult2.reqId)}
result=result.concat(jsonResult2.recs)}
var newArray=new Array();var provisionalTable={};for(var i=0,item;(item=result[i])!=null;i++){if(!provisionalTable[item.itemId]){newArray.push(result[i]);provisionalTable[item.itemId]=true}}
result=newArray;result.sort(function(a,b){return b.weight-a.weight});var responseObj=new Object();if(code===0){responseObj.code=code;responseObj.reqId=reqId;responseObj.recs=result}else{responseObj.code=code}
return new brs.Response(responseObj)}
brs.mergeResponse=mergeResponse;brs.wabi=new Object();brs.wabi.reqstatus=0;var bf={sengin:["baidu.com","baidu.com","google.com","google.cn","google.com.hk","sogou.com","zhongsou.com","search.yahoo.com","one.cn.yahoo.com","soso.com","114search.118114.cn","search.live.com","youdao.com","gougou.com","bing.com","so.360.cn","so.com"],sword:["word","wd","q","q","q","query","w","p","p","w","kw","q","q","search","q","q","q"],_n:(new Date()).getTime(),_t:["rs=","ja=","oc=","ln=","lk=","ep=","ct=","bt=","ot=","fv="],_s:30};var a=document;var h=a.location;var d=window;var g=navigator;var orderArray=orderArray||[];var j=encodeURIComponent;function i_(k){return a.getElementByTagName(k)||null}
function f(){this.tag={}}
f.prototype={getFl:function(){this.tag.fl=(d.screen.width+"x"+d.screen.height)},getJa:function(){this.tag.ja=(g.javaEnabled()?"1":"0")},getDs:function(){var k;if(g.systemLanguage){k=g.systemLanguage}else{if(g.browserLanguage){k=g.browserLanguage}else{if(g.language){k=g.language}else{if(g.userLanguage){k=g.userLanguage}else{k=""}}}}
this.tag.ds=k.toLowerCase()},getLn:function(){var k=a.referrer;this.tag.ln=k?j(k):""},splitDir:function(r_,t){return(r_.replace("//","/")).split(t)},samDom:function(r,v){if(r==""||r==null){return false}
var n=this.splitDir(r,"/")[1];var s=v.length;for(var p=0;p<s;p++){var o=v[p];var m=n.indexOf(o);if(m>-1){this.tag.ref=n;return true}}
return false},getLo:function(r){if(r==""||r==null){this.tag.lo="";return}
if(r.indexOf("?")>=0){var q=this.splitDir(r,"?");if(q.length>0){for(var z=0;z<q.length;z++){if(q[z].indexOf("&")>=0){var l=q[z].split("&");for(var m=0;m<l.length;m++){var r_=l[m].split("=");for(var b=0;b<bf.sword.length;b++){if(r_[0].toLowerCase()==bf.sword[b]&&r.indexOf(bf.sengin[b])>=0){this.tag.lo=r_[1];return}}}}else{if(q[z].indexOf("=")>=0){var r_=q[z].split("=");for(var b=0;b<bf.sword.length;b++){if(r_[0].toLowerCase()==bf.sword[b]&&r.indexOf(bf.sengin[b])>=0){this.tag.lo=r_[1];return}}}}}}else{this.tag.lo=""}}else{this.tag.lo=""}},getEp:function(){this.tag.ep=j(document.location.href)},getEt:function(){var t=a.title;if(t==null){var t_=i_("title");if(t_!=null&&t_.length>0){t=t_[0]}else{t=""}}
this.tag.et=j(t.substr(0,20))},getAgent:function(){return g.userAgent.toLowerCase()},getCp:function(){var u=this.getAgent();if(u.indexOf("msie")>=0){this.tag.cp="IE";this.tag.cs=document.charset;var m=g.appVersion.toLowerCase();var z="msie";if(m.indexOf(z)>=0){var m_=m.split(";");for(var i=0;i<m_.length;i++){if(m_[i].indexOf(z)>-1){this.tag.cp=(m_[i].replace(z,"IE"));break}}}}
if(u.indexOf("se")>0){this.tag.cp="SoGouBrowser"}
if(u.indexOf("tencenttraceler")>0){this.tag.cp="QQTT"}
if(u.indexOf("360se")>0){this.tag.cp="360SE"}
if(u.indexOf("theworld")>0){this.tag.cp="TheWorld"}
if(u.indexOf("firefox")>=0){this.tag.cp="Firefox";this.tag.cs=document.characterSet}
if(u.indexOf("safari")>=0){this.tag.cp="Safari";this.tag.cs=document.charset}
if(u.indexOf("camino")>=0){this.tag.cp="Camino";this.tag.cs=document.charset}
if(u.indexOf("konqueror")>=0){this.tag.cp="Konqueror";this.tag.cs=document.charset}
if(u.indexOf("chrome")>=0){this.tag.cp="googleBrowser";this.tag.cs=document.charset}
if(u.indexOf("opera")>=0){this.tag.cp="Opera";this.tag.cs=document.charset}
if(u.indexOf("maxthon")>0){this.tag.cp="MaxThon";this.tag.cs=document.charset}},getCw:function(){var u=this.getAgent();var iw=(g.platform.toLowerCase()=="win32")||(g.platform=="windows");var im=(g.platform.toLowerCase()=="mac68k")||(g.platform.toLowerCase()=="macppc")||(g.platform.toLowerCase()=="macintosh");if(im){this.tag.cw="Mac"}
var iu=(g.platform=="X11")&&!iw&&!im;if(iu){this.tag.cw="Unix"}
var il=(String(g.platform).indexOf("Linux")>-1);if(il){this.tag.cw="Linux"}
if(iw){if(u.indexOf("windows nt 5.0")>-1||u.indexOf("windows 2000")>-1){this.tag.cw="Win2000"}
if(u.indexOf("windows nt 5.1")>-1||u.indexOf("windows xp")>-1){this.tag.cw="WinXP"}
if(u.indexOf("windows nt 5.2")>-1||u.indexOf("windows 2003")>-1){this.tag.cw="Win2003"}
if(u.indexOf("windows nt 6.1")>-1||u.indexOf("windows 7")>-1){this.tag.cw="Win7"}}else{this.tag.cw="None"}},getFs:function(){var f="-";if(g.plugins&&g.plugins.length){for(var ii=0;ii<g.plugins.length;ii++){if(g.plugins[ii].name.indexOf("Shockwave Flash")!=-1){f=g.plugins[ii].description.split("Shockwave Flash ")[1];break}}}else{if(window.ActiveXObject){for(var ii=10;ii>=2;ii--){try{var fl=eval("new ActiveXObject('ShockwaveFlash.ShockwaveFlash."+ii+"');");if(fl){f=ii+".0";break}}catch(e){}}}}
this.tag.fs=f},getProtocol:function(){return(h.protocol=="https:"?"https://":"http://")},getAcc:function(){this.tag.cf=document.domain},setCookie:function(n,v,k){var t_e=new Date();t_e.setTime(t_e.getTime()+k);a.cookie=n+"="+escape(v)+((k==null)?" ":";expires="+t_e.toUTCString()+";path=/;")},getCookie:function(l){var m=new RegExp("(^| )"+l+"=([^;]*)(;|\x24)");var k=m.exec(a.cookie);if(k){return unescape(k[2])||""}
return""},isRandom:function(){return Math.ceil(Math.random()*100000000)},getS_d:function(t){var u=new Date(t);var m=u.getMonth()+1;var d=u.getDate();if(m<10){m="0"+m}
if(d<10){d="0"+d}
return u.getFullYear()+m+d},setSessiontimeout:function(t){bf._s=t},getSessiontimeout:function(){return bf._s},getH:function(f){var h="";for(var i=0;i<f.length;i++){h+=((f.charAt(i)).charCodeAt()+"").charAt(1)}
return h},isCookie:function(){var c=[];var c_0="tmf";var c_l="tma";var c_c="tmb";var c_3="tmc";var c_6="tmd";var v=this.getH(this.tag.cf)+"."+this.isRandom()+"."+bf._n;var cc=bf._n;var timeout=this.getSessiontimeout();l=timeout*60*1000;if(this.getCookie(c_3)==null||this.getCookie(c_3)==""){this.setCookie(c_3,"1."+v+"."+cc+"."+cc,l)}else{var ma=this.getCookie(c_3);var a=ma.split(".");try{a[0]=parseInt(a[0])+1+"";__n=(new Date()).getTime();a[4]=a[5];a[5]=__n}catch(e){this.setCookie(c_3,"0."+v+"."+cc+"."+cc,l)}
this.setCookie(c_3,a.join("."),l)}
var l=24*30*24*60*60*1000;if(this.getCookie(c_l)==null||this.getCookie(c_l)==""){this.setCookie(c_l,v+"."+bf._n+"."+bf._n+"."+1,l)}else{var ma=this.getCookie(c_l);var a=ma.split(".");if(a.length==6){__n=(new Date()).getTime();try{if(this.getS_d(parseInt(a[4]))<this.getS_d(parseInt(__n))){a[5]=parseInt(a[5])+1;a[3]=a[4];a[4]=__n}}catch(e){this.setCookie(c_l,v+"."+bf._n+"."+bf._n+"."+1,l)}
this.setCookie(c_l,a.join("."),l)}else{this.setCookie(c_l,v+"."+bf._n+"."+bf._n+"."+1,l)}}
l=6*30*24*60*60*1000;var v__=0+"."+v;if(this.getCookie(c_6)==""){this.setCookie(c_6,"0."+v+".",l)}
var r_=decodeURIComponent(this.tag.ln);if(r_!=""&&h.href.indexOf("?")>=0){if(r_.indexOf(this.tag.cf)<0&&h.href.indexOf(this.tag.cf)>=0){var v___=h.href.substring(h.href.indexOf("?")+1,h.href.length);var ma=this.getCookie(c_6);var a=ma.split(".");if(v___.indexOf("&")>=0){var vs=v___.split("&");for(var i_=0;i_<vs.length;i_++){if(vs[i_].indexOf("t__")>=0){var t__=vs[i_].substring(vs[i_].indexOf("=")+1,vs[i_].length);if(a[a.length-1]!=t__){this.setCookie(c_6,v__+"."+t__,l)}}}}else{var t__=v___.substring(v___.indexOf("=")+1,v___.length);if(a[a.length-1]!=t__){this.setCookie(c_6,v__+"."+t__,l)}}}}
if(this.getCookie(c_6)){var ma=this.getCookie(c_6);var a=ma.split(".");try{a[0]=parseInt(a[0])+1+""}catch(e){}
this.setCookie(c_6,a.join("."),l)}
c.push(c_l+"="+this.getCookie(c_l));c.push(c_3+"="+this.getCookie(c_3));c.push(c_6+"="+this.getCookie(c_6));return c.join("&")},init:function(){this.getFl();this.getJa();this.getDs();this.getLn();if(this.samDom(a.referrer,bf.sengin)){this.getLo(a.referrer)}else{this.getLo("")}
this.getEp();this.getEt();this.getCp();this.getCw();this.getFs();this.getAcc()},initBridge:function(){this.init();return bf._t[0]+this.tag.fl+"&"+bf._t[1]+this.tag.ja+"&"+bf._t[2]+this.tag.ds+"&"+bf._t[3]+this.tag.ln+"&"+bf._t[4]+this.tag.lo+"&"+bf._t[5]+this.tag.ep+"&"+bf._t[7]+this.tag.cp+"&"+bf._t[8]+this.tag.cw+"&"+bf._t[9]+this.tag.fs+"&"+this.isCookie()}};brs.wabi.paramterSet=function(){var b=new f();if(typeof(brs.wabi.t)!="undefined"){b.setSessiontimeout(brs.wabi.t)}
return(b.initBridge())};brs.wabi.setSessiontimeout=function(t){brs.wabi.t=t};function RecByHis(user_id,session_id,number){Recommend.call(this,REC_TYPE_CODE.USER_HISTORY,session_id,number);this.user_id=user_id}
RecByHis.prototype=new Recommend();brs.RecByHis=RecByHis;function RecByImage(item_id,session_id,number){Recommend.call(this,REC_TYPE_CODE.ITEM_IMAGE,session_id,number);this.item_id=item_id}
RecByImage.prototype=new Recommend();brs.RecByImage=RecByImage;function GetBroHis(user_id,session_id,number){Request.call(this,"GetBroHis");this.user_id=user_id;if(session_id===null||session_id===undefined){session_id=getCookie("bfd_sessionid_id")}
if(session_id===null||session_id===undefined){session_id=timestamp+""+parseInt(Math.random()*10000000000000000)}
this.session_id=session_id;if(typeof number!="number"){this.number=10}else{this.number=number}}
GetBroHis.prototype=new Request();brs.GetBroHis=GetBroHis;function GetBuyHis(user_id,session_id,number){Request.call(this,"GetBuyHis");this.user_id=user_id;if(session_id===null||session_id===undefined){session_id=getCookie("bfd_sessionid_id")}
if(session_id===null||session_id===undefined){session_id=timestamp+""+parseInt(Math.random()*10000000000000000)}
this.session_id=session_id;if(typeof number!="number"){this.number=10}else{this.number=number}}
GetBuyHis.prototype=new Request();brs.GetBuyHis=GetBuyHis;brs.getSid=function(){var session_id=getCookie("bfd_sessionid_id");if(session_id===null||session_id===undefined){session_id=timestamp+""+parseInt(Math.random()*10000000000000000)}
return session_id}})(window);