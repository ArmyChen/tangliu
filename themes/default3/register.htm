<!DOCTYPE html>
<html lang="zh"><head><script src="js/v.htm" charset="utf-8"></script><script src="js/hm.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>快乐购商城 - 用户注册</title>
<meta name="keywords" content="快乐购商城">
<meta name="description" content="快乐购商城">
<style type="text/css">
body {
_behavior: url(http://www.happigo.com/shop/templates/default/css/csshover.htc);
}
</style>

<script src="js/gs.js" async="" type="text/javascript"></script><script src="js/jquery-1.js"></script>
<script src="js/placeholderfriend.js"></script>
<link href="css/header.css" rel="stylesheet">
<link href="css/footer.css" rel="stylesheet">
<script>
var COOKIE_PRE = 'C4F3_';
var _CHARSET = 'utf-8';
var SITEURL = 'http://www.happigo.com/shop';
var SHOP_SITE_URL = 'http://www.happigo.com/shop';
var RESOURCE_SITE_URL = 'http://ecimg.happigo.com/resource';
var SHOP_TEMPLATES_URL = 'http://www.happigo.com/shop/templates/default';
var WEB_UID = '';
var WEB_CUST_NO = '';
</script>
<script src="js/dialog.js" id="dialog_js" charset="utf-8"></script><link href="css/dialog.css" rel="stylesheet" type="text/css">
<script type="text/javascript">
    (function () {
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = (location.protocol == 'https:' ? 'https://ssl.' : 'http://static.') + 'gridsumdissector.com/js/Clients/GWD-002610-711F71/gs.js';
        var    firstScript = document.getElementsByTagName('script')[0];
        firstScript.parentNode.insertBefore(s, firstScript);
    })();
</script>
</head>
<body>
<div id="append_parent"></div>
<!-- 头部 start-->
<div class="full_sc">
    <div class="w1000 header_center ClearFix">
        <div class="h_c_logo">
            <a href="http://www.happigo.com/">
                <img src="images/logo.jpg"></a>
        </div>
        <div class="h_c_right">
            <img src="images/top_center.jpg">
        </div>
    </div>
</div><!-- 头部 end--><link href="css/register.css" rel="stylesheet">
<div class="w980">
    <div class="login_box ClearFix">
        <div class="logn_b_l ClearFix">
            <a href="http://www.happigo.com/zt/2-1519.html" target="_blank" title="出发"><img style="width:560px;height:360px" src="images/05136996933058831.jpg" alt="出发" border="0"></a>        </div>
        <div class="logn_b_r ClearFix">
            <div class="lognul">
                <div class="login_h2 ClearFix">
                    <h2>用户注册</h2>
                    <div class="lognrtop">已有帐号<a href="http://www.happigo.com/login/">在此登录</a></div>
                </div>
                <div class="mc">
                    <div class="form">
                        <form id="register_form" method="post" action="http://www.happigo.com/shop/index.php?act=login&amp;op=usersave">
                            <input name="formhash" value="YKF6IIosHnOuqWyyCmTPPuSU9F-GNE8" type="hidden">                            <input value="" name="ref_url" type="hidden">
                            <input id="nchash" name="nchash" value="2bf3f6d2" type="hidden">
                            <input name="form_submit" value="ok" type="hidden">
                            <div class="item item1">
                                <input placeholder="请输入手机号码" class="itxt onfocustxt" autocomplete="off" tabindex="1" maxlength="11" name="mobile" id="mobile" type="text">
                                <div class="err_box">
                                    <div class="err_msg err_msg1" style="display: none;" id="error_mobile"><i class="icon_err"></i>请输入11位手机号码</div>
                                </div>
                            </div>
                            <div class="item item4">
                                <input placeholder="验证码" autocomplete="off" maxlength="6" tabindex="3" class="itxt itxt_yzm onfocustxt" name="mobile_code" id="mobile_code" type="text">
                                <a href="javascript:void(0);" id="send_auth_code" class="ncm-btn ml5" tabindex="2">
                    		        <span id="sending" style="display:none">正在</span>
                    		        <span class="send_success_tips" style="display: none;">
                    		        <strong id="show_times" class="red mr5"></strong>秒后再次获取</span><div id="hide_times">获取短信验证码</div>
                            	</a>
                                <div class="err_box">
                                    <div class="err_msg err_msg1" style="display: none;" id="error_mobile_code"><i class="icon_err"></i>您输入的短信验证码有误</div>
                                </div>
                            </div>
                            <div class="item item2">
                                <input placeholder="请输入密码" autocomplete="off" tabindex="4" maxlength="20" class="itxt" name="password" id="password" type="password">
                                <div class="err_box">
                                    <div class="err_msg err_msg1" style="display: none;" id="error_password"><i class="icon_err"></i>请输入您的密码，您的密码可能为字母、数字或符号的组合</div>
                                </div>
                            </div>
                            <div class="item item2">
                                <input placeholder="请再次输入密码" class="itxt" autocomplete="off" tabindex="5" maxlength="20" name="password_confirm" id="password_confirm" type="password">
                                <div class="err_box">
                                    <div class="err_msg err_msg1" style="display: none;" id="error_password_confirm"><i class="icon_err"></i>请输入您的密码，您的密码可能为字母、数字或符号的组合</div>
                                </div>
                            </div>
                            <div class="item item3">
                                <input placeholder="验证码" autocomplete="off" tabindex="6" maxlength="4" size="10" class="itxt itxt_yzm onfocustxt" name="captcha" id="captcha" type="text">
                                <img src="images/index.png" title="" name="codeimage" id="codeimage" class="fl ml5" style="width:78px; height:38px;" border="0"> 
                                <a href="javascript:void(0)" class="ml5" onclick="javascript:document.getElementById('codeimage').src='http://www.happigo.com/shop/index.php?act=seccode&amp;op=makecode&amp;nchash=2bf3f6d2&amp;t=' + Math.random();">换一张</a>
                                <div class="err_box">
                                    <div class="err_msg err_msg1" style="display: none;" id="error_captcha"><i class="icon_err"></i>请输入右侧验证码</div>
                                </div>
                            </div>
                            <div class="item item5">
                                <div class="login-btn">
                                    <a id="loginsubmit" tabindex="7" class="btn-img btn-entry" href="javascript:;">立即注册</a>
                                </div>
                                <div class="agree">
                                    <input class="jdcheckbox" tabindex="8" name="agree" id="agree" checked="checked" type="checkbox">
                                    <label for="autoLogin">注册即表示同意快乐购<span><a href="http://www.happigo.com/news-7.html" target="_blank">《用户服务协议》</a></span>条款</label>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    //注册表单验证
    var ALLOW_SEND = true;
    var error = "<i class=\"icon_err\"></i>";
    $(function(){
    	function StepTimes() {
    		$num = parseInt($('#show_times').html());
    		$num = $num - 1;
    		$('#show_times').html($num);
    		if ($num <= 0) {
    			ALLOW_SEND = !ALLOW_SEND;
    			$('#hide_times').show();
    			$('.send_success_tips').hide();
    		} else {
    			setTimeout(StepTimes,1000);
    		}
    	}
    	
        var repeat_Time = 120;
        $('#send_auth_code').click(function (){
        	var mobile = $('#mobile').val();
        	if (mobile.length != 11){
        		VerificationFocusin("mobile",error+"请输入11位手机号码","2");
                return false;
            } else {
            	VerificationFocusout("mobile", "2");
            }
            
        	if (!ALLOW_SEND) return;
        	ALLOW_SEND = !ALLOW_SEND;
        	$.getJSON(SHOP_SITE_URL+"/index.php?act=login&op=send_auth_code", {"mobile":mobile,"type":2},function(data){
        		if (data.state == 'true') {
        			$('#sending').hide();
        		    $('.send_success_tips').show();
        		    repeat_Time = data.time;
        		    if(repeat_Time < 10){
        		    	repeat_Time = 120;
            		}
        		    $('#hide_times').hide();
        		    $('#show_times').html(repeat_Time);
        		    setTimeout(StepTimes,1000);
        		} else {
        			$('#hide_times').show();
        			ALLOW_SEND = !ALLOW_SEND;
        			$('#sending').hide();
        			$('.send_success_tips').hide();
        			showDialog(data.msg, 'error', '', '', '1', '', '', '', '', '', '2');
        		}
        	});
        });

        function VerificationFocusin(control, error, type){
        	REGISTER_TYPE = true;
            if(type == "1"){ 	
            	$("#error_"+control).addClass("err_msg2");
                $("#error_"+control).removeClass("err_msg err_msg1");
            } else {
            	$("#"+control).addClass("err_txt");
                $("#error_"+control).removeClass("err_msg2");
                $("#error_"+control).addClass("err_msg err_msg1");
            }
            $("#error_"+control).show();
        	$("#error_"+control).html(error);
        }

        function VerificationFocusout(control, type){
        	$("#"+control).removeClass("err_txt");
        	$("#error_"+control).hide();
        }
        var login_start = {
        		'login_href' : function(type,url){
        			if(type == 'reload'){
    					location.replace(location);
    				} else if(type == 'mall'){
    					location.href = url;	
    				}else{
    					location.href = url;
    				} 
            	},
        };

        var REGISTER_TYPE = true;
        function VerificationRegister(){
        	if(!REGISTER_TYPE){    
                return;
            }
        	REGISTER_TYPE = !REGISTER_TYPE;
            var mobile = $("#mobile").val();
            if(mobile == ''){
            	VerificationFocusin("mobile",error+"请输入11位手机号码","2");
                return false;
            } else {
            	VerificationFocusout("mobile", "2");
            }
            var mobile_code = $("#mobile_code").val();
            if(mobile_code == ''){
            	VerificationFocusin("mobile_code",error+"您输入的短信验证码有误","2");
                return false;
            } else {
            	VerificationFocusout("mobile_code", "2");
            }
            var password = $("#password").val();
            if(password == ''){
            	VerificationFocusin("password",error+"密码不能为空","2");
                return false;
            } else {
            	VerificationFocusout("password", "2");
            }
            var password_confirm = $("#password_confirm").val();
            if(password_confirm == ''){
            	VerificationFocusin("password_confirm",error+"密码不能为空","2");
                return false;
            } else {
            	VerificationFocusout("password_confirm", "2");
            }
            var captcha = $("#captcha").val();
            if(captcha == '' || captcha.length != 4){
            	VerificationFocusin("captcha",error+"您输入的验证码有误","2");
                return false;
            } else {
            	VerificationFocusout("captcha", "2");
            }
            var form = $('#register_form');
    	    $.ajax({
    		    url: form.attr('action'),
    		    type: form.attr('method'),
    		    dataType: 'json',
    		    data: form.serializeArray(),
    		    beforeSend: function(){
    		    	$("#loginsubmit").attr("disabled","disabled").html("正在注册");
    			},
    			success: function(data){
    				REGISTER_TYPE = !REGISTER_TYPE;
        			if(data.state == '1'){
        				var mall_type = data.mall_type;
        				var ref_type = data.ref_type;
						var ref_url = data.ref_url;
        				if(mall_type == '1'){
        					$.ajax({
        						type: "GET",
        						async: false,
        						crossDomain: true,
        						timeout : 1000, //超时时间设置，单位毫秒
        						url: data.mall_url,
        						data: { time: data.mall_time, code: data.mall_code},
        						dataType: "jsonp",
        						jsonp: "callback",
        						jsonpCallback: "callbackHandler",
        						success: function (data) {  
        							login_start.login_href(ref_type,ref_url);  	  						
        						},
        						error: function(e) { 	
        							login_start.login_href(ref_type,ref_url);  		
        						},
        						complete : function(XMLHttpRequest,status){ //请求完成后最终执行参数
      							  if(status=='timeout'){//超时,status还有success,error等值的情况
        							 login_start.login_href(ref_type,ref_url);  
        						  }
        						} 
        						});
        				} else {
        					login_start.login_href(ref_type,ref_url); 
        				}  				
        			} else {
            			var nchash = $('#nchash').val();
        				document.getElementById('codeimage').src = SHOP_SITE_URL+'/index.php?act=seccode&op=makecode&nchash='+nchash+'&t=' + Math.random();
        				$("#loginsubmit").removeAttr("disabled").html("立即注册");
        				if(data.state == '-1'){
            				VerificationFocusin("mobile",error+data.msg,"2");
                            return false;
            			} else if(data.state == '-2'){
            				VerificationFocusin("mobile_code",error+data.msg,"2");
                            return false;
            			} else if(data.state == '-3'){
            				VerificationFocusin("password",error+data.msg,"2");
                            return false;
            			} else if(data.state == '-5'){
            				VerificationFocusin("captcha",error+data.msg,"2");
                            return false;
            			} else if(data.state == '-10'){
            				showDialog(data.msg, 'error', '', '', '1', '', '', '', '', '', '2');
            			} else {
            				showDialog(data.msg, 'error', '', '', '1', '', '', '', '', '', '2');
            			}
        			} 
    			},
    			error: function(){
    				REGISTER_TYPE = !REGISTER_TYPE;
    			    $("#loginsubmit").removeAttr("disabled").html("立即注册");
    			}
    		});
        }
        
        $('#mobile').focusin(function () {
        	VerificationFocusin("mobile", "请输入11位手机号码", "1");
        });
        $("#mobile").focusout(function () {
        	VerificationFocusout("mobile", "1");
        });
        $('#mobile_code').focusin(function () {
        	VerificationFocusin("mobile_code", "请输入发送给您手机上的验证码", "1");
        });
        $("#mobile_code").focusout(function () {
        	VerificationFocusout("mobile_code", "1");
        });
        $('#password').focusin(function () {
        	VerificationFocusin("password", "请输入您的密码,您的密码可能为字母、数字或符号组合", "1");
        });
        $("#password").focusout(function () {
        	VerificationFocusout("password", "1");
        });
        $('#password_confirm').focusin(function () {
        	VerificationFocusin("password_confirm", "请输入您的密码,您的密码可能为字母、数字或符号组合", "1");
        });
        $("#password_confirm").focusout(function () {
        	VerificationFocusout("password_confirm", "1");
        });
        $('#captcha').focusin(function () {
        	VerificationFocusin("captcha", "请输入右侧验证码", "1");
        });
        $("#captcha").focusout(function () {
        	VerificationFocusout("captcha", "1");
        });

        //注册按钮点击事件
        $(".login-btn").click(function () {
        	VerificationRegister();
        });
    })
</script><!--底部-->
<div class="footer Clearfix">
    <div class="footer_bottom">
        <div class="w1200">
            <p>
                <span class="font_arial">Copyright© 2006-2016 happigo. All Rights Reserved </span>
                免费服务热线: 400-705-1111 | 固话也可拨打: 800-705-1111
                <span class="font_arial">E-Mail: service@happigo.com</span><br>
                湘ICP备12000157号 信息网络传播视听节目许可证号：1810530
            </p>
            <p class="footer_p">
                <a href="http://www.itrust.org.cn/home/index/itrust_certifi/wm/2782875193.html" target="_blank">
                    <img src="images/foot_img3.png"></a>
                <a href="https://search.szfw.org/cert/l/CX20150428007576007720" target="_blank">
                    <img src="images/foot_img4.png"></a>
            </p>
        </div>
    </div>
</div>
<script type="text/javascript" charset="UTF-8" src="js/trace.js"></script>
<script type="text/javascript">
var VL = false;
$(function(){
var sp = "Register";
var sv = "register";
trace_main(sp, sv);
var _hmt = _hmt || [];
var hm = document.createElement("script");
hm.src = "//hm.baidu.com/hm.js?9298c88929ec361a06c5344ab1e2ea65";
var s = document.getElementsByTagName("script")[0]; 
s.parentNode.insertBefore(hm, s);
});
</script>
    <!--底部 end-->

</body></html>